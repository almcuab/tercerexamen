<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boostrap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="indexdb.js"> </script>
</head>
<body>
    <h1 class="text-end">Tecnologias en internet</h1>
    <!-- barra de navegacion -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <img src="https://brandemia.org/contenido/subidas/2022/04/cabecera.jpg" alt="logo" width="180" class="rounded mx-auto d-block">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Inicio</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Acerca de</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Noticias
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">Ley de eestudiantes</a></li>
                  <li><a class="dropdown-item" href="#">Aprobacion de estatutos</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" aria-disabled="true">Blogs</a>
              </li>
            </ul>
            <form class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Buscar</button>
            </form>
          </div>
        </div>
    </nav>
    
    <!-- anuncios -->
    <div class="row">
        <div class="col-4"> 
            <div class="accordion accordion-flush" id="accordionFlushExample">
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                      Accordion Item #1
                    </button>
                  </h2>
                  <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the first item's accordion body.</div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                      Accordion Item #2
                    </button>
                  </h2>
                  <div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the second item's accordion body. Let's imagine this being filled with some actual content.</div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
                      Accordion Item #3
                    </button>
                  </h2>
                  <div id="flush-collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the third item's accordion body. Nothing more exciting happening here in terms of content, but just filling up the space to make it look, at least at first glance, a bit more representative of how this would look in a real-world application.</div>
                  </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree4" aria-expanded="false" aria-controls="flush-collapseThree4">
                        Accordion Item #4
                      </button>
                    </h2>
                    <div id="flush-collapseThree4" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                      <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the third item's accordion body. Nothing more exciting happening here in terms of content, but just filling up the space to make it look, at least at first glance, a bit more representative of how this would look in a real-world application.</div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree5" aria-expanded="false" aria-controls="flush-collapseThree5">
                        Accordion Item #5
                      </button>
                    </h2>
                    <div id="flush-collapseThree5" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                      <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the third item's accordion body. Nothing more exciting happening here in terms of content, but just filling up the space to make it look, at least at first glance, a bit more representative of how this would look in a real-world application.</div>
                    </div>
                  </div>
              </div>
        </div>
        <div class="col-8">
            <img src="https://media.vozpopuli.com/2021/10/01/tenis.jpg" class="rounded mx-auto d-block" alt="..." width="450">
        </div>
    </div>
    
    <div class="row p-3">
        <div class="col-9">
          <div class="input-group mb-3">
            <input type="text" id="IdPersona" class="form-control" placeholder="Ingrese Id" aria-label="IdPersona" aria-describedby="button-addon2">
            </div>
            <div class="input-group mb-3">
                <input id="Nombre" type="text" class="form-control" placeholder="Ingrese su nombre" aria-label="Nombre" aria-describedby="button-addon2">
                <button class="btn btn-outline-secondary" type="button" id="button-addon2" onclick="insertar()">Guardar</button>
            </div>
            <button type="button" class="btn btn-primary" onclick="devolver()">Mostrar</button>
            <div class="row p-1">
                <div class="col-12">
                  <ol class="list-group list-group-numbered" id="lista"></ol>
                    <!-- <ol class="list-group list-group-numbered">
                        <li class="list-group-item">A list item</li>
                        <li class="list-group-item">A list item</li>
                        <li class="list-group-item">A list item</li>
                    </ol> -->
                </div>
            </div>
            <div class="row">
                <div class="col-6 p-1">
                    <div class="card">
                        <h5 class="card-header">Ejemplo #1</h5>
                        <div class="card-body">
                          <h5 class="card-title">Special title treatment</h5>
                          <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                          <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                      </div>
                </div>
                <div class="col-6 p-1">
                    <div class="card">
                        <h5 class="card-header">Ejemplo #2</h5>
                        <div class="card-body">
                          <h5 class="card-title">Special title treatment</h5>
                          <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                          <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                      </div>
                </div>
                <div class="col-6 p-1">
                    <div class="card">
                        <h5 class="card-header">Ejemplo #3</h5>
                        <div class="card-body">
                          <h5 class="card-title">Special title treatment</h5>
                          <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                          <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                      </div>
                </div>
                <div class="col-6 p-1">
                    <div class="card">
                        <h5 class="card-header">Ejemplo #3</h5>
                        <div class="card-body">
                          <h5 class="card-title">Special title treatment</h5>
                          <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                          <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div>
                      </div>
                </div>
            </div>

        </div>
        <div class="col-3 p-1">
            <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Email address</label>
                <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
              </div>
              <div class="mb-3 ">
                <label for="exampleFormControlTextarea1" class="form-label">Example textarea</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
              </div>
        </div>
    </div>
    
    
    <!-- <div class="container text-center">
        <div class="row">
          <div class="col  col-lg-3 col-md-3 col-sm-12"> 
            <button type="button" class="btn btn-primary">Primary</button>
          </div>
          <div class="col">
            <button type="button" class="btn btn-secondary">Secondary</button>
          </div>
          <div class="col"><button type="button" class="btn btn-success">Success</button></div>
          <div class="col"><button type="button" class="btn btn-danger">Danger</button></div>
        </div>
        <div class="row">
          <div class="col-8"><button type="button" class="btn btn-warning">Warning</button></div>
          <div class="col-4"><button type="button" class="btn btn-info">Info</button></div>
        </div>
    </div> -->
    <script>
      const insertar = () => {
          // recuperando los datos de los inputs
          var _idPersona = document.getElementById('IdPersona').value;
          var _nombre = document.getElementById('Nombre').value;
          console.log(_idPersona);
          console.log(_nombre);

          // creando un objeto articulo 
          var art = {IdPersona: _idPersona, nombre: _nombre};
          var transaccion = db.transaction("persona", "readwrite");
          const objeto = transaccion.objectStore('persona');
          // insertar en el objeto
          // const cargarInfo= objeto.add(informacion);
          const cargarInfo = objeto.add(art);
          if  (cargarInfo)
              console.log("guardo con exito",cargarInfo);
      }
      const devolver = ()=>{
        // Lista de boostrapp visualizar
        var lista = document.getElementById("lista");
        console.log(lista);
        db = dbConnection.result;
        // lectura de tablas
        var transaccion = db.transaction("persona", "readonly");
        const objeto = transaccion.objectStore('persona');
        console.log(objeto);
        // iterar los elementos
        const cursor = objeto.openCursor();
        cursor.onsuccess = (e) =>{
            const c = e.target.result;
            if (c){
                // insertando en el html de UL, se realizo algunas concatenaciones adicionales
                lista.innerHTML += "<li class='list-group-item'>"+c.value['IdPersona']+'--'+c.value['nombre']+" &nbsp; &nbsp; <button type='button' onclick='eliminar("+c.value['IdPersona']+")' class='btn btn-outline-danger '>Eliminar</button></li>"
                c.continue();
            } else {
                console.log("no tiene datos");
            }
        }
    }
    const eliminar = (clave) =>{ 
        console.log(clave);
        var transaccion = db.transaction("persona", "readwrite");
        const objeto = transaccion.objectStore('persona');
        console.log("test", objeto);
        // insertar en el objeto
        const eliminado = objeto.delete(clave);
        eliminado.onsuccess = (test) => {
          console.log(test);
            // devolver();
        }
        eliminado.onerror = (error) => {
            console.log(error);
        }
    }
    </script>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</body>
</html>